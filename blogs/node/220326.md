---
title: sequelize-typescript的使用
tags: 
 - node
date: 2022-03-26
categories:
 - node
---

安装：

```shell
npm install --save-dev @types/node @types/validator
npm install sequelize reflect-metadata sequelize-typescript
```

建立一对多的关系：

```typescript
@Table
class Player extends Model {
  @Column
  name: string

  @Column
  num: number

  @ForeignKey(() => Team)
  @Column
  teamId: number

  @BelongsTo(() => Team)
  team: Team
}

@Table
class Team extends Model {
  @Column
  name: string

  @HasMany(() => Player)
  players: Player[]
}
```

建立多对多的关系：

```typescript
@Table
class Book extends Model {
  @BelongsToMany(() => Author, () => BookAuthor)
  authors: Author[]
}

@Table
class Author extends Model {
  @BelongsToMany(() => Book, () => BookAuthor)
  books: Book[]
}

@Table
class BookAuthor extends Model {
  @ForeignKey(() => Book)
  @Column
  bookId: number

  @ForeignKey(() => Author)
  @Column
  authorId: number
}
```
